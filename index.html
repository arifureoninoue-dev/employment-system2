<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employment Contract Builder - Enhanced</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');

        *,
        *::before,
        *::after {
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Noto Sans JP', sans-serif;
            margin: 0;
            padding: 0;
            background: #0f172a;
            color: #1e293b;
        }

        .flex {
            display: flex;
        }

        .flex-col {
            flex-direction: column;
        }

        .flex-1 {
            flex: 1;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }

        .items-center {
            align-items: center;
        }

        .justify-between {
            justify-content: space-between;
        }

        .gap-2 {
            gap: 8px;
        }

        .gap-3 {
            gap: 12px;
        }

        .h-screen {
            height: 100vh;
        }

        .overflow-y-auto {
            overflow-y: auto;
        }

        .p-4 {
            padding: 16px;
        }

        .p-6 {
            padding: 24px;
        }

        .px-6 {
            padding-left: 24px;
            padding-right: 24px;
        }

        .py-3 {
            padding-top: 12px;
            padding-bottom: 12px;
        }

        .mb-2 {
            margin-bottom: 8px;
        }

        .mb-4 {
            margin-bottom: 16px;
        }

        .mb-6 {
            margin-bottom: 24px;
        }

        .text-xs {
            font-size: 12px;
            line-height: 1.4;
        }

        .text-sm {
            font-size: 14px;
            line-height: 1.5;
        }

        .text-lg {
            font-size: 18px;
            line-height: 1.5;
        }

        .text-2xl {
            font-size: 24px;
            line-height: 1.3;
        }

        .font-bold {
            font-weight: 700;
        }

        .font-black {
            font-weight: 900;
        }

        .text-white {
            color: #ffffff;
        }

        .text-slate-400 {
            color: #94a3b8;
        }

        .text-slate-500 {
            color: #64748b;
        }

        .bg-white {
            background-color: #ffffff;
        }

        .bg-slate-50 {
            background-color: #f8fafc;
        }

        .bg-slate-800 {
            background-color: #1e293b;
        }

        .bg-indigo-600 {
            background-color: #4f46e5;
        }

        .border {
            border: 1px solid #e2e8f0;
        }

        .border-r {
            border-right: 1px solid #e2e8f0;
        }

        .border-b {
            border-bottom: 1px solid #e2e8f0;
        }

        .rounded-lg {
            border-radius: 8px;
        }

        .rounded-xl {
            border-radius: 12px;
        }

        .rounded-2xl {
            border-radius: 16px;
        }

        .rounded-full {
            border-radius: 9999px;
        }

        .shadow-sm {
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, .05);
        }

        .shadow-xl {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, .1), 0 8px 10px -6px rgba(0, 0, 0, .1);
        }

        .shadow-inner {
            box-shadow: inset 0 2px 4px 0 rgba(0, 0, 0, .06);
        }

        .w-full {
            width: 100%;
        }

        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }

        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        button {
            cursor: pointer;
            background: none;
            border: none;
            font-family: inherit;
        }

        button:disabled {
            cursor: not-allowed;
            opacity: 0.2;
        }

        input,
        select {
            font-family: inherit;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(20px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .anim-fade {
            animation: fadeIn 0.4s ease-out;
        }

        .sidebar {
            width: 280px;
            min-width: 280px;
            background: #f8fafc;
            border-right: 1px solid #e2e8f0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            box-shadow: inset 0 2px 4px 0 rgba(0, 0, 0, .06);
        }

        .record-item {
            padding: 14px 16px;
            border-radius: 16px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: border-color 0.2s;
            margin-bottom: 6px;
        }

        .record-item:hover {
            border-color: #e2e8f0;
        }

        .record-item.active {
            background: #ffffff;
            border-color: #6366f1;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, .1);
        }

        .record-item .delete-btn {
            display: none;
            margin-top: 8px;
            color: #ef4444;
            font-size: 11px;
            font-weight: 700;
        }

        .record-item:hover .delete-btn {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .home-card {
            background: #1e293b;
            border: 2px solid #334155;
            padding: 40px;
            border-radius: 24px;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s;
            width: 100%;
        }

        .home-card:hover {
            border-color: #6366f1;
            transform: translateY(-6px);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, .4);
        }

        .field-input {
            width: 100%;
            background: #f1f5f9;
            border: 2px solid transparent;
            padding: 16px;
            border-radius: 16px;
            outline: none;
            font-weight: 700;
            font-size: 14px;
            transition: all 0.2s;
            font-family: inherit;
        }

        .field-input:focus {
            border-color: #6366f1;
            background: #ffffff;
        }

        .field-input.has-error {
            border-color: #ef4444;
            background: rgba(239, 68, 68, 0.05);
        }

        .validation-panel {
            position: sticky;
            top: 120px;
            background: #0f172a;
            border-radius: 24px;
            padding: 32px;
            color: white;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, .25);
            max-height: calc(100vh - 140px);
            overflow-y: auto;
        }

        .notification {
            position: fixed;
            top: 24px;
            right: 24px;
            z-index: 9999;
            min-width: 300px;
            padding: 16px 24px;
            border-radius: 16px;
            color: white;
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 700;
            font-size: 14px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, .3);
            animation: slideIn 0.3s ease-out;
        }

        .btn-export {
            width: 100%;
            background: #0f172a;
            color: white;
            font-weight: 900;
            padding: 16px;
            border-radius: 16px;
            font-size: 12px;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, .2);
            transition: transform 0.1s;
            font-family: inherit;
        }

        .btn-export:hover:not(:disabled) {
            transform: translateY(1px);
        }

        .dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .dot-red {
            background: #ef4444;
        }

        .dot-green {
            background: #10b981;
        }

        .icon-box {
            width: 64px;
            height: 64px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            margin-bottom: 24px;
        }

        .icon-box-sm {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .error-item {
            display: flex;
            gap: 8px;
            color: #f87171;
            font-size: 11px;
            background: rgba(239, 68, 68, 0.1);
            padding: 12px;
            border-radius: 12px;
            border: 1px solid rgba(239, 68, 68, 0.2);
            margin-bottom: 8px;
        }

        .suffix {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 11px;
            font-weight: 900;
            color: #94a3b8;
        }

        .home-screen {
            min-height: 100vh;
            background: #0f172a;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 24px;
        }

        .home-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 32px;
            margin-top: 32px;
        }

        .tab-nav {
            display: flex;
            gap: 4px;
            background: #f1f5f9;
            padding: 6px;
            border-radius: 16px;
            overflow-x: auto;
            border: 1px solid #e2e8f0;
        }

        .tab-btn {
            padding: 12px 20px;
            border-radius: 12px;
            font-size: 13px;
            font-weight: 700;
            color: #64748b;
            white-space: nowrap;
            transition: all 0.2s;
        }

        .tab-btn:hover {
            background: #ffffff;
            color: #475569;
        }

        .tab-btn.active {
            background: #4f46e5;
            color: white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, .1);
        }

        .field-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 24px;
        }

        .field-section {
            background: white;
            padding: 28px;
            border-radius: 20px;
            border: 1px solid #e2e8f0;
        }

        .field-section-title {
            font-size: 14px;
            font-weight: 900;
            color: #0f172a;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid #f1f5f9;
            letter-spacing: 0.05em;
        }

        .grid-form {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 48px;
        }

        .relative {
            position: relative;
        }

        .field-help {
            font-size: 11px;
            color: #64748b;
            margin-top: 6px;
            line-height: 1.5;
            padding: 8px 12px;
            background: #f8fafc;
            border-radius: 8px;
            border-left: 3px solid #6366f1;
        }

        .field-prompt {
            font-size: 14px;
            color: #334155;
            margin-bottom: 12px;
            line-height: 1.6;
            font-weight: 500;
            white-space: pre-line;
        }

        @media (max-width: 1024px) {
            .grid-form {
                grid-template-columns: 1fr;
            }

            .validation-panel {
                position: static;
                max-height: none;
            }
        }

        @media (max-width: 640px) {

            .home-grid,
            .grid-2 {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <div id="root"></div>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script type="text/babel">
        const { useState, useMemo, useRef, useEffect } = React;

        // Field generation functions
        function generateShiftFields(count) {
            const fields = [];
            for (let i = 1; i <= count; i++) {
                fields.push(
                    { id: `shift_start_${i}`, label: `„Äê‰∫§‰ª£Âà∂„ÄëÂßãÊ•≠ÊôÇÂàª${i}`, sf: `ShiftStart${i}__c`, type: 'time', req: false, bu: ['intern'] },
                    { id: `shift_end_${i}`, label: `„Äê‰∫§‰ª£Âà∂„ÄëÁµÇÊ•≠ÊôÇÂàª${i}`, sf: `ShiftEnd${i}__c`, type: 'time', req: false, bu: ['intern'] },
                    { id: `shift_days_${i}`, label: `„Äê‰∫§‰ª£Âà∂„Äë‰∫§‰ª£Âà∂„ÅÆÈÅ©Áî®Êó•${i}`, sf: `ShiftDays${i}__c`, type: 'text', req: false, bu: ['intern'] },
                    { id: `shift_break_start_${i}_1`, label: `„Äê‰∫§‰ª£Âà∂„Äë‰ºëÊÜ©ÈñãÂßãÊôÇÈñì${i}`, sf: `ShiftBreakStart${i}_1__c`, type: 'time', req: false, bu: ['intern'] },
                    { id: `shift_break_end_${i}_1`, label: `„Äê‰∫§‰ª£Âà∂„Äë‰ºëÊÜ©ÁµÇ‰∫ÜÊôÇÈñì${i}`, sf: `ShiftBreakEnd${i}_1__c`, type: 'time', req: false, bu: ['intern'] },
                    { id: `shift_break_start_${i}_2`, label: `„Äê‰∫§‰ª£Âà∂„Äë‰ºëÊÜ©ÈñãÂßãÊôÇÈñì${i}-2`, sf: `ShiftBreakStart${i}_2__c`, type: 'time', req: false, bu: ['intern'] },
                    { id: `shift_break_end_${i}_2`, label: `„Äê‰∫§‰ª£Âà∂„Äë‰ºëÊÜ©ÁµÇ‰∫ÜÊôÇÈñì${i}-2`, sf: `ShiftBreakEnd${i}_2__c`, type: 'time', req: false, bu: ['intern'] },
                    { id: `shift_break_start_${i}_3`, label: `„Äê‰∫§‰ª£Âà∂„Äë‰ºëÊÜ©ÈñãÂßãÊôÇÈñì${i}-3`, sf: `ShiftBreakStart${i}_3__c`, type: 'time', req: false, bu: ['intern'] },
                    { id: `shift_break_end_${i}_3`, label: `„Äê‰∫§‰ª£Âà∂„Äë‰ºëÊÜ©ÁµÇ‰∫ÜÊôÇÈñì${i}-3`, sf: `ShiftBreakEnd${i}_3__c`, type: 'time', req: false, bu: ['intern'] },
                    { id: `shift_break_total_${i}`, label: `„Äê‰∫§‰ª£Âà∂„Äë‰ºëÊÜ©ÊôÇÈñìÂêàË®à${i}ÔºàÂàÜÔºâ`, sf: `ShiftBreakTotal${i}__c`, type: 'number', req: false, suf: 'ÂàÜ', bu: ['intern'] },
                    { id: `shift_daily_hours_${i}`, label: `„Äê‰∫§‰ª£Âà∂„Äë1Êó•„ÅÆÊâÄÂÆöÂä¥ÂÉçÊôÇÈñì${i}(ÊôÇÈñì)`, sf: `ShiftDailyHours${i}__c`, type: 'number', req: false, suf: 'ÊôÇÈñì', bu: ['intern'] },
                    { id: `shift_daily_minutes_${i}`, label: `„Äê‰∫§‰ª£Âà∂„Äë1Êó•„ÅÆÊâÄÂÆöÂä¥ÂÉçÊôÇÈñì${i}(ÂàÜ)`, sf: `ShiftDailyMinutes${i}__c`, type: 'number', req: false, suf: 'ÂàÜ', bu: ['intern'] }
                );
            }
            return fields;
        }

        function generateAllowanceFields(count) {
            const fields = [];
            for (let i = 1; i <= count; i++) {
                fields.push(
                    { id: `allowance_name_${i}`, label: `ÊâãÂΩìÂêç${i}`, sf: `AllowanceName${i}__c`, type: 'text', req: false, bu: ['intern'] },
                    { id: `allowance_amount_${i}`, label: `ÊâãÂΩìÈ°ç${i}`, sf: `AllowanceAmount${i}__c`, type: 'number', req: false, suf: 'ÂÜÜ', bu: ['intern'] },
                    { id: `allowance_calc_${i}`, label: `ÊâãÂΩì„ÅÆË®àÁÆóÊñπÊ≥ï${i}`, sf: `AllowanceCalc${i}__c`, type: 'text', req: false, bu: ['intern'] }
                );
            }
            return fields;
        }

        function generateOtherCostFields(count) {
            const fields = [];
            for (let i = 1; i <= count; i++) {
                fields.push(
                    { id: `other_cost_name_${i}`, label: `„Åù„ÅÆ‰ªñ„ÅÆË≤†ÊãÖË≤ªÁî®Âêç${i}`, sf: `OtherCostName${i}__c`, type: 'text', req: false, bu: ['intern'] },
                    { id: `other_cost_type_${i}`, label: `„Åù„ÅÆ‰ªñË≤†ÊãÖË≤ªÁî®${i} Á®ÆÂà•`, sf: `OtherCostType${i}__c`, type: 'select', req: false, opts: ['ÂÆüË≤ª', 'ÂÆöÈ°ç'], bu: ['intern'] },
                    { id: `other_cost_amount_${i}`, label: `„Åù„ÅÆ‰ªñ„ÅÆË≤†ÊãÖË≤ªÁî®È°ç${i}`, sf: `OtherCostAmount${i}__c`, type: 'number', req: false, suf: 'ÂÜÜ', bu: ['intern'] }
                );
            }
            return fields;
        }

        // All field definitions
        const FIELDS = [
            // Tab 1: Âü∫Êú¨ÊÉÖÂ†±
            { id: 'company_name', label: '‰ºÅÊ•≠Âêç', sf: 'Name', type: 'text', req: true, bu: ['intern', 'skilled'], tab: 1 },
            { id: 'company_name_en', label: '‰ºÅÊ•≠Âêç(Ëã±)', sf: 'EnglishName__c', type: 'text', req: true, val: 'half', bu: ['intern', 'skilled'], tab: 1 },
            { id: 'sales_name', label: 'ÊãÖÂΩìËÄÖÂêç', sf: 'SalesName__c', type: 'text', req: true, bu: ['intern', 'skilled'], tab: 1 },
            { id: 'rep_name', label: '‰ª£Ë°®ËÄÖÂêç', sf: 'RepresentativeName__c', type: 'text', req: true, bu: ['intern', 'skilled'], tab: 1 },
            { id: 'rep_name_en', label: '‰ª£Ë°®ËÄÖ(Ëã±Ë™û)', sf: 'RepresentativeNameEN__c', type: 'text', req: true, val: 'half', bu: ['intern', 'skilled'], tab: 1 },
            { id: 'rep_position', label: '‰ª£Ë°®ËÄÖÂΩπËÅ∑Âêç', sf: 'RepresentativePosition__c', type: 'text', req: true, bu: ['intern', 'skilled'], tab: 1 },
            { id: 'postal_code', label: 'ÊâÄÂú®Âú∞(ÈÉµ‰æøÁï™Âè∑)', sf: 'PostalCode__c', type: 'text', req: true, val: 'num', bu: ['intern', 'skilled'], tab: 1 },
            { id: 'address', label: 'ÊâÄÂú®Âú∞(Êã†ÁÇπ)', sf: 'Address__c', type: 'text', req: true, bu: ['intern', 'skilled'], tab: 1 },
            { id: 'address_en', label: '‰ΩèÊâÄ(Ëã±)', sf: 'AddressEN__c', type: 'text', req: true, val: 'half', bu: ['intern', 'skilled'], tab: 1 },
            { id: 'job_type', label: 'ËÅ∑Á®Æ(ÊäÄËÉΩÂÆüÁøí)', sf: 'JobType__c', type: 'text', req: true, bu: ['intern'], tab: 1 },
            { id: 'work_name', label: '‰ΩúÊ•≠Âêç', sf: 'WorkName__c', type: 'text', req: true, bu: ['intern'], tab: 1 },
            { id: 'workplace_name', label: 'Â∞±Ê•≠ÂÖà‰∫ãÊ•≠ÊâÄÂêç', sf: 'WorkplaceName__c', type: 'text', req: false, bu: ['intern'], tab: 1 },

            // Tab 2: ÁîüÊ¥ªÁí∞Â¢É„ÉªÂÆøÊ≥äÊñΩË®≠
            { id: 'housing_status', label: 'ÂÆøÊ≥äÊñΩË®≠', sf: 'HousingStatus__c', type: 'select', req: true, opts: ['Êú™ÂÆö', 'Á¢∫ÂÆö'], bu: ['intern', 'skilled'], tab: 2 },
            { id: 'housing_id', label: 'ÂÆøÊ≥äÊñΩË®≠ID', sf: 'HousingID__c', type: 'text', req: false, bu: ['intern', 'skilled'], tab: 2 },
            { id: 'housing_postal', label: 'ÂÆøÊ≥äÊñΩË®≠ÈÉµ‰æøÁï™Âè∑', sf: 'HousingPostalCode__c', type: 'text', req: false, val: 'num', bu: ['intern', 'skilled'], tab: 2 },
            { id: 'housing_property_name', label: 'ÂÆøÊ≥äÊñΩË®≠Áâ©‰ª∂Âêç', sf: 'HousingPropertyName__c', type: 'text', req: false, bu: ['intern', 'skilled'], tab: 2 },
            { id: 'housing_address', label: 'ÂÆøÊ≥äÊñΩË®≠‰ΩèÊâÄ', sf: 'HousingAddress__c', type: 'text', req: false, bu: ['intern', 'skilled'], tab: 2 },
            { id: 'property_area', label: 'Áâ©‰ª∂„ÅÆÁ∑èÈù¢Á©ç', sf: 'PropertyTotalArea__c', type: 'number', req: false, suf: '„é°', bu: ['intern', 'skilled'], tab: 2 },
            { id: 'housing_residents', label: 'ÂÆøÊ≥äÊñΩË®≠„ÅÆÂ±Ö‰ΩèËÄÖ‰∫∫Êï∞', sf: 'HousingResidents__c', type: 'number', req: false, suf: '‰∫∫', bu: ['intern', 'skilled'], tab: 2 },
            { id: 'area_per_person', label: '1‰∫∫„ÅÇ„Åü„ÇäÂ±ÖÂÆ§Èù¢Á©ç', sf: 'AreaPerPerson__c', type: 'number', req: false, suf: '„é°', bu: ['intern', 'skilled'], tab: 2 },

            // Tab 3: Âä¥ÂÉçÊôÇÈñì„Éª‰ºëÊÜ©„Éª‰ºëÊó•
            { id: 'annual_holidays', label: 'Âπ¥ÈñìÂêàË®à‰ºëÊó•Êï∞(Êó•)', sf: 'AnnualHolidays__c', type: 'number', req: true, suf: 'Êó•', bu: ['intern', 'skilled'], tab: 3 },
            { id: 'has_work_rules', label: 'Â∞±Ê•≠Ë¶èÂâá„ÅÆÊúâÁÑ°', sf: 'HasWorkRules__c', type: 'select', req: true, opts: ['Êúâ', 'ÁÑ°'], bu: ['intern', 'skilled'], tab: 3 },
            { id: 'daily_work_hours', label: '1Êó•„ÅÆÊâÄÂÆöÂä¥ÂÉçÊôÇÈñì(ÊôÇÈñì)', sf: 'DailyWorkHours__c', type: 'number', req: true, suf: 'ÊôÇÈñì', bu: ['intern', 'skilled'], tab: 3 },
            { id: 'daily_work_minutes', label: '1Êó•„ÅÆÊâÄÂÆöÂä¥ÂÉçÊôÇÈñì(ÂàÜ)', sf: 'DailyWorkMinutes__c', type: 'number', req: false, suf: 'ÂàÜ', bu: ['intern', 'skilled'], tab: 3 },
            { id: 'annual_work_hours', label: 'Âπ¥ÊâÄÂÆöÂä¥ÂÉçÊôÇÈñì(ÊôÇÈñì)', sf: 'AnnualWorkHours__c', type: 'number', req: false, suf: 'ÊôÇÈñì', bu: ['intern', 'skilled'], tab: 3 },
            { id: 'annual_work_minutes', label: 'Âπ¥ÊâÄÂÆöÂä¥ÂÉçÊôÇÈñì(ÂàÜ)', sf: 'AnnualWorkMinutes__c', type: 'number', req: false, suf: 'ÂàÜ', bu: ['intern', 'skilled'], tab: 3 },
            { id: 'weekly_work_hours', label: 'ÈÄ±ÊâÄÂÆöÂä¥ÂÉçÊôÇÈñì(ÊôÇÈñì)', sf: 'WeeklyWorkHours__c', type: 'number', req: true, suf: 'ÊôÇÈñì', bu: ['intern', 'skilled'], tab: 3 },
            { id: 'weekly_work_minutes', label: 'ÈÄ±ÊâÄÂÆöÂä¥ÂÉçÊôÇÈñì(ÂàÜ)', sf: 'WeeklyWorkMinutes__c', type: 'number', req: false, suf: 'ÂàÜ', bu: ['intern', 'skilled'], tab: 3 },
            { id: 'start_time', label: '„ÄêÂü∫Êú¨„ÄëÂßãÊ•≠ÊôÇÂàª', sf: 'StartTime__c', type: 'time', req: true, bu: ['intern', 'skilled'], tab: 3 },
            { id: 'end_time', label: '„ÄêÂü∫Êú¨„ÄëÁµÇÊ•≠ÊôÇÂàª', sf: 'EndTime__c', type: 'time', req: true, bu: ['intern', 'skilled'], tab: 3 },
            { id: 'break_start_1', label: '„ÄêÂü∫Êú¨„Äë‰ºëÊÜ©ÈñãÂßã1', sf: 'BreakStart1__c', type: 'time', req: false, bu: ['intern', 'skilled'], tab: 3 },
            { id: 'break_end_1', label: '„ÄêÂü∫Êú¨„Äë‰ºëÊÜ©ÁµÇ‰∫Ü1', sf: 'BreakEnd1__c', type: 'time', req: false, bu: ['intern', 'skilled'], tab: 3 },
            { id: 'break_start_2', label: '„ÄêÂü∫Êú¨„Äë‰ºëÊÜ©ÈñãÂßã2', sf: 'BreakStart2__c', type: 'time', req: false, bu: ['intern', 'skilled'], tab: 3 },
            { id: 'break_end_2', label: '„ÄêÂü∫Êú¨„Äë‰ºëÊÜ©ÁµÇ‰∫Ü2', sf: 'BreakEnd2__c', type: 'time', req: false, bu: ['intern', 'skilled'], tab: 3 },
            { id: 'break_start_3', label: '„ÄêÂü∫Êú¨„Äë‰ºëÊÜ©ÈñãÂßã3', sf: 'BreakStart3__c', type: 'time', req: false, bu: ['intern', 'skilled'], tab: 3 },
            { id: 'break_end_3', label: '„ÄêÂü∫Êú¨„Äë‰ºëÊÜ©ÁµÇ‰∫Ü3', sf: 'BreakEnd3__c', type: 'time', req: false, bu: ['intern', 'skilled'], tab: 3 },
            { id: 'break_total_minutes', label: '„ÄêÂü∫Êú¨„Äë‰ºëÊÜ©ÊôÇÈñìÂêàË®à(ÂàÜ)', sf: 'BreakTotalMinutes__c', type: 'number', req: false, suf: 'ÂàÜ', bu: ['intern', 'skilled'], tab: 3 },
            { id: 'has_overtime', label: 'ÊâÄÂÆöÊôÇÈñìÂ§ñÂä¥ÂÉç„ÅÆÊúâÁÑ°', sf: 'HasOvertime__c', type: 'select', req: true, opts: ['Êúâ', 'ÁÑ°'], bu: ['intern', 'skilled'], tab: 3 },
            { id: 'has_flex_time', label: '„ÄêÂü∫Êú¨„ÄëÂ§âÂΩ¢ÊôÇÈñìÂä¥ÂÉçÂà∂„ÅÆÊúâÁÑ°', sf: 'HasFlexTime__c', type: 'select', req: false, opts: ['Êúâ', 'ÁÑ°'], bu: ['intern', 'skilled'], tab: 3 },
            { id: 'saturday_work', label: '„ÄêÂü∫Êú¨„ÄëÂúüÊõúÊó•Âã§Âãô„ÅÆÊúâÁÑ°', sf: 'SaturdayWork__c', type: 'select', req: false, opts: ['Êúâ', 'ÁÑ°'], bu: ['intern', 'skilled'], tab: 3 },
            { id: 'regular_holiday_day', label: 'ÂÆö‰æã‰ºëÊó•„ÅÆÊõúÊó•', sf: 'RegularHolidayDay__c', type: 'text', req: false, bu: ['intern', 'skilled'], tab: 3 },
            { id: 'regular_holiday_other', label: 'ÂÆö‰æã‰ºëÊó•„Åù„ÅÆ‰ªñ', sf: 'RegularHolidayOther__c', type: 'text', req: false, bu: ['intern', 'skilled'], tab: 3 },
            { id: 'irregular_holiday', label: 'ÈùûÂÆö‰ºëÊó•', sf: 'IrregularHoliday__c', type: 'text', req: false, bu: ['intern', 'skilled'], tab: 3 },
            { id: 'irregular_holiday_days', label: 'ÈùûÂÆö‰æã‰ºëÊó•„ÅÆÊó•Êï∞', sf: 'IrregularHolidayDays__c', type: 'number', req: false, suf: 'Êó•', bu: ['intern', 'skilled'], tab: 3 },
            { id: 'national_holidays', label: 'Êó•Êú¨„ÅÆÂõΩÊ∞ë„ÅÆÁ•ùÊó•', sf: 'NationalHolidays__c', type: 'select', req: false, opts: ['‰ºë„Åø', 'Âá∫Âã§'], bu: ['intern', 'skilled'], tab: 3 },
            { id: 'other_start_time', label: '„Äê„Åù„ÅÆ‰ªñ„ÄëÂßãÊ•≠ÊôÇÂàª', sf: 'OtherStartTime__c', type: 'time', req: false, bu: ['intern', 'skilled'], tab: 3 },
            { id: 'other_end_time', label: '„Äê„Åù„ÅÆ‰ªñ„ÄëÁµÇÊ•≠ÊôÇÂàª', sf: 'OtherEndTime__c', type: 'time', req: false, bu: ['intern', 'skilled'], tab: 3 },
            { id: 'has_shift', label: '‰∫§‰ª£Âà∂„ÅÆÊúâÁÑ°', sf: 'HasShift__c', type: 'select', req: false, opts: ['Êúâ', 'ÁÑ°'], bu: ['intern', 'skilled'], tab: 3 },
            ...generateShiftFields(5),

            // Tab 4: Ë≥ÉÈáë„ÉªÊâãÂΩì„ÉªÊîØÊâïÊù°‰ª∂
            { id: 'payment_type', label: 'ÊîØÊâïÂå∫ÂàÜ', sf: 'PaymentType__c', type: 'select', req: true, opts: ['ÊúàÁµ¶', 'Êó•Áµ¶', 'ÊôÇÁµ¶'], bu: ['intern', 'skilled'], tab: 4 },
            { id: 'monthly_salary_1', label: 'ÊúàÁµ¶È°ç(ÂÆüÁøí1Âè∑)', sf: 'MonthlySalary1__c', type: 'number', req: false, suf: 'ÂÜÜ', bu: ['intern'], tab: 4 },
            { id: 'daily_salary_1', label: 'Êó•Áµ¶È°ç(ÂÆüÁøí1Âè∑)', sf: 'DailySalary1__c', type: 'number', req: false, suf: 'ÂÜÜ', bu: ['intern'], tab: 4 },
            { id: 'hourly_salary_1', label: 'ÊôÇÁµ¶È°ç(ÂÆüÁøí1Âè∑)', sf: 'HourlySalary1__c', type: 'number', req: false, suf: 'ÂÜÜ', bu: ['intern'], tab: 4 },
            { id: 'monthly_salary_2', label: 'ÊúàÁµ¶È°ç(ÂÆüÁøí2Âè∑)', sf: 'MonthlySalary2__c', type: 'number', req: false, suf: 'ÂÜÜ', bu: ['intern'], tab: 4 },
            { id: 'daily_salary_2', label: 'Êó•Áµ¶È°ç(ÂÆüÁøí2Âè∑)', sf: 'DailySalary2__c', type: 'number', req: false, suf: 'ÂÜÜ', bu: ['intern'], tab: 4 },
            { id: 'hourly_salary_2', label: 'ÊôÇÁµ¶È°ç(ÂÆüÁøí2Âè∑)', sf: 'HourlySalary2__c', type: 'number', req: false, suf: 'ÂÜÜ', bu: ['intern'], tab: 4 },
            { id: 'monthly_salary_3', label: 'ÊúàÁµ¶È°ç(ÂÆüÁøí3Âè∑)', sf: 'MonthlySalary3__c', type: 'number', req: false, suf: 'ÂÜÜ', bu: ['intern'], tab: 4 },
            { id: 'daily_salary_3', label: 'Êó•Áµ¶È°ç(ÂÆüÁøí3Âè∑)', sf: 'DailySalary3__c', type: 'number', req: false, suf: 'ÂÜÜ', bu: ['intern'], tab: 4 },
            { id: 'hourly_salary_3', label: 'ÊôÇÁµ¶È°ç(ÂÆüÁøí3Âè∑)', sf: 'HourlySalary3__c', type: 'number', req: false, suf: 'ÂÜÜ', bu: ['intern'], tab: 4 },
            { id: 'monthly_work_hours', label: 'ÊúàÊâÄÂÆöÂä¥ÂÉçÊôÇÈñì(ÊôÇÈñì)', sf: 'MonthlyWorkHours__c', type: 'number', req: false, suf: 'ÊôÇÈñì', bu: ['intern', 'skilled'], tab: 4 },
            { id: 'monthly_work_minutes', label: 'ÊúàÊâÄÂÆöÂä¥ÂÉçÊôÇÈñì(ÂàÜ)', sf: 'MonthlyWorkMinutes__c', type: 'number', req: false, suf: 'ÂàÜ', bu: ['intern', 'skilled'], tab: 4 },
            { id: 'has_bonus', label: 'Ë≥û‰∏éÊúâÁÑ°', sf: 'HasBonus__c', type: 'select', req: false, opts: ['Êúâ', 'ÁÑ°'], bu: ['intern', 'skilled'], tab: 4 },
            { id: 'has_raise', label: 'ÊòáÁµ¶ÊúâÁÑ°', sf: 'HasRaise__c', type: 'select', req: false, opts: ['Êúâ', 'ÁÑ°'], bu: ['intern', 'skilled'], tab: 4 },
            ...generateAllowanceFields(4),
            { id: 'has_retirement', label: 'ÈÄÄËÅ∑ÈáëÊúâÁÑ°', sf: 'HasRetirement__c', type: 'select', req: false, opts: ['Êúâ', 'ÁÑ°'], bu: ['intern', 'skilled'], tab: 4 },
            { id: 'resignation_notice_days', label: 'ÈÄÄËÅ∑Â±äÂá∫„ÅÆÁå∂‰∫àÊó•Êï∞ÔºàÊó•ÂâçÔºâ', sf: 'ResignationNoticeDays__c', type: 'number', req: false, suf: 'Êó•', bu: ['intern', 'skilled'], tab: 4 },
            { id: 'wage_cutoff_day', label: 'Ë≥ÉÈáëÁ∑†ÂàáÊó•', sf: 'WageCutoffDay__c', type: 'number', req: false, suf: 'Êó•', bu: ['intern', 'skilled'], tab: 4 },
            { id: 'wage_payment_day', label: 'Ë≥ÉÈáëÊîØÊâïÊó•', sf: 'WagePaymentDay__c', type: 'number', req: false, suf: 'Êó•', bu: ['intern', 'skilled'], tab: 4 },
            { id: 'wage_cutoff_day_2', label: 'Ë≥ÉÈáëÁ∑†ÂàáÊó•2', sf: 'WageCutoffDay2__c', type: 'number', req: false, suf: 'Êó•', bu: ['intern', 'skilled'], tab: 4 },
            { id: 'wage_payment_day_2', label: 'Ë≥ÉÈáëÊîØÊâïÊó•2', sf: 'WagePaymentDay2__c', type: 'number', req: false, suf: 'Êó•', bu: ['intern', 'skilled'], tab: 4 },
            { id: 'wage_payment_method', label: 'Ë≥ÉÈáëÊîØÊâïÊñπÊ≥ï', sf: 'WagePaymentMethod__c', type: 'select', req: false, opts: ['ÈäÄË°åÊåØËæº', 'ÁèæÈáëÊîØÁµ¶'], bu: ['intern', 'skilled'], tab: 4 },
            { id: 'health_checkup_hire', label: 'ÈõáÂÖ•„ÇåÊôÇ„ÅÆÂÅ•Â∫∑Ë®∫Êñ≠ ÂèóË®∫Êó•', sf: 'HealthCheckupHire__c', type: 'date', req: false, bu: ['intern', 'skilled'], tab: 4 },
            { id: 'health_checkup_first', label: 'ÂàùÂõûÂÅ•Â∫∑Ë®∫Êñ≠ ÂèóË®∫Êó•', sf: 'HealthCheckupFirst__c', type: 'date', req: false, bu: ['intern', 'skilled'], tab: 4 },
            { id: 'health_checkup_schedule', label: '„Åù„ÅÆÂæå„ÅÆÂÅ•Â∫∑Ë®∫Êñ≠ÂÆüÊñΩÊôÇÊúü', sf: 'HealthCheckupSchedule__c', type: 'text', req: false, bu: ['intern', 'skilled'], tab: 4 },
            { id: 'has_wage_deduction', label: 'Ë≥ÉÈáëÊîØÊâï„ÅÑÊôÇ„ÅÆÊéßÈô§ÊúâÁÑ°', sf: 'HasWageDeduction__c', type: 'select', req: false, opts: ['Êúâ', 'ÁÑ°'], bu: ['intern', 'skilled'], tab: 4 },
            { id: 'pension_type', label: 'Âä†ÂÖ•Âπ¥ÈáëÁ®ÆÂà•', sf: 'PensionType__c', type: 'select', req: false, opts: ['ÂéöÁîüÂπ¥Èáë', 'ÂõΩÊ∞ëÂπ¥Èáë'], bu: ['intern', 'skilled'], tab: 4 },
            { id: 'insurance_type', label: 'Âä†ÂÖ•‰øùÈô∫Á®ÆÂà•', sf: 'InsuranceType__c', type: 'select', req: false, opts: ['ÂÅ•Â∫∑‰øùÈô∫', 'ÂõΩÊ∞ëÂÅ•Â∫∑‰øùÈô∫'], bu: ['intern', 'skilled'], tab: 4 },
            { id: 'other_insurance', label: '„Åù„ÅÆ‰ªñ„ÅÆ‰øùÈô∫', sf: 'OtherInsurance__c', type: 'text', req: false, bu: ['intern', 'skilled'], tab: 4 },
            { id: 'labor_insurance_total', label: 'Âä¥ÂÉç‰øùÈô∫ÊéßÈô§Á∑èÈ°ç', sf: 'LaborInsuranceTotal__c', type: 'number', req: false, suf: 'ÂÜÜ', bu: ['intern', 'skilled'], tab: 4 },
            { id: 'income_tax', label: 'ÊâÄÂæóÁ®é', sf: 'IncomeTax__c', type: 'number', req: false, suf: 'ÂÜÜ', bu: ['intern', 'skilled'], tab: 4 },
            { id: 'social_insurance_total', label: 'Á§æ‰ºö‰øùÈô∫ÊéßÈô§Á∑èÈ°ç', sf: 'SocialInsuranceTotal__c', type: 'number', req: false, suf: 'ÂÜÜ', bu: ['intern', 'skilled'], tab: 4 },
            { id: 'provides_meals', label: 'È£ü‰∫ãÈ£üÊùêÁ≠â„ÅÆÊèê‰æõÊúâÁÑ°', sf: 'ProvidesMeals__c', type: 'select', req: false, opts: ['Êúâ', 'ÁÑ°'], bu: ['intern', 'skilled'], tab: 4 },
            { id: 'housing_fee_monthly', label: 'Â±Ö‰ΩèË≤ªÂæ¥ÂèéÈ°çÔºàÊúàÔºâ', sf: 'HousingFeeMonthly__c', type: 'number', req: false, suf: 'ÂÜÜ', bu: ['intern', 'skilled'], tab: 4 },
            { id: 'housing_property_type', label: 'Â±Ö‰ΩèÁâ©‰ª∂Á®ÆÂà•', sf: 'HousingPropertyType__c', type: 'select', req: false, opts: ['‰ºöÁ§æÊâÄÊúâ', 'Ë≥ÉË≤∏', 'ÂØÆ'], bu: ['intern', 'skilled'], tab: 4 },
            { id: 'housing_fee_explanation', label: 'Â±Ö‰ΩèË≤ª„ÅåÂÆüË≤ª„Å´Áõ∏ÂΩì„Åô„ÇãÈ°ç„Åù„ÅÆ‰ªñ„ÅÆÈÅ©Ê≠£„Å™È°ç„Åß„ÅÇ„Çã„Åì„Å®„ÅÆË™¨Êòé', sf: 'HousingFeeExplanation__c', type: 'text', req: false, bu: ['intern', 'skilled'], tab: 4 },
            { id: 'charges_utilities', label: 'Ê∞¥ÈÅìÂÖâÁÜ±Ë≤ª„ÅÆÂæ¥Âèé„ÅÆÊúâÁÑ°', sf: 'ChargesUtilities__c', type: 'select', req: false, opts: ['Êúâ', 'ÁÑ°'], bu: ['intern', 'skilled'], tab: 4 },
            { id: 'utilities_type', label: 'Ê∞¥ÈÅìÂÖâÁÜ±Ë≤ªÁ®ÆÂà•', sf: 'UtilitiesType__c', type: 'select', req: false, opts: ['ÂÆüË≤ª', 'ÂÆöÈ°ç'], bu: ['intern', 'skilled'], tab: 4 },
            { id: 'utilities_details', label: 'Ê∞¥ÈÅìÂÖâÁÜ±Ë≤ª„ÅÆË©≥Á¥∞', sf: 'UtilitiesDetails__c', type: 'text', req: false, bu: ['intern', 'skilled'], tab: 4 },
            { id: 'has_other_fees', label: '„Åù„ÅÆ‰ªñÊäÄËÉΩÂÆüÁøíÁîü„ÅåÂÆöÊúü„Å´Ë≤†ÊãÖ„Åô„ÇãË≤ªÁî®„ÅÆÊúâÁÑ°', sf: 'HasOtherFees__c', type: 'select', req: false, opts: ['Êúâ', 'ÁÑ°'], bu: ['intern', 'skilled'], tab: 4 },
            { id: 'telecom_type', label: 'ÈÄö‰ø°Ë≤ªÁ®ÆÂà•', sf: 'TelecomType__c', type: 'select', req: false, opts: ['ÂÆüË≤ª', 'ÂÆöÈ°ç', 'ÁÑ°'], bu: ['intern', 'skilled'], tab: 4 },
            { id: 'telecom_fee_monthly', label: 'ÂÆüË≤ª‰ª•Â§ñ„ÅÆÊôÇ„ÅÆÈÄö‰ø°Ë≤ªÔºàÊúàÔºâ', sf: 'TelecomFeeMonthly__c', type: 'number', req: false, suf: 'ÂÜÜ', bu: ['intern', 'skilled'], tab: 4 },
            ...generateOtherCostFields(4),
            { id: 'other_cost_benefits', label: '„Åù„ÅÆ‰ªñË≤†ÊãÖË≤ªÁî®„Å´ÂØæ„Åô„Çã‰æøÁõä', sf: 'OtherCostBenefits__c', type: 'text', req: false, bu: ['intern', 'skilled'], tab: 4 },
            { id: 'other_cost_explanation', label: '„Åù„ÅÆ‰ªñ„ÅÆË≤†ÊãÖË≤ªÁî®„ÅåÂÆüË≤ª„Å´Áõ∏ÂΩì„Åô„ÇãÈ°ç„Åß„ÅÇ„Çã„Åì„Å®„ÅÆË™¨Êòé', sf: 'OtherCostExplanation__c', type: 'text', req: false, bu: ['intern', 'skilled'], tab: 4 },

            // Tab 5: ÂãüÈõÜË¶Å‰ª∂
            { id: 'placement_date', label: 'ÈÖçÂ±ûÂ∏åÊúõÊó•', sf: 'PlacementDate__c', type: 'date', req: false, bu: ['intern', 'skilled'], tab: 5, prompt: '‰ºÅÊ•≠Êßò„ÅÆÂ∏åÊúõ„Åô„ÇãÈÖçÂ±ûÂ∏åÊúõÊó•„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ' },
            { id: 'company_culture', label: '‰ºöÁ§æ„ÅÆÁâπÂæ¥ÔºèÁ§æÈ¢®', sf: 'CompanyCulture__c', type: 'text', req: false, bu: ['intern', 'skilled'], tab: 5, prompt: '‰ºöÁ§æ„ÅÆÁâπÂæ¥„Åä„Çà„Å≥Á§æÈ¢®„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ\nË®òËºâ„Åï„Çå„ÅüÊÉÖÂ†±„ÇíÂÖÉ„Å´‰∫∫Êùê„ÅåÂøúÂãü„Åô„Çã„ÅÆ„Åß„ÄÅ„Çà„Çä„Çà„ÅÑ„Éû„ÉÉ„ÉÅ„É≥„Ç∞„ÅÆ„Åü„ÇÅ„Åç„Å°„Çì„Å®„Åó„Åü„Éí„Ç¢„É™„É≥„Ç∞„ÇíÊé®Â•®„Åó„Åæ„Åô„ÄÇ' },
            { id: 'foreigner_experience', label: 'Â§ñÂõΩ‰∫∫ÂèóÂÖ•ÁµåÈ®ì', sf: 'ForeignerExperience__c', type: 'select', req: false, opts: ['Êúâ', 'ÁÑ°'], bu: ['intern', 'skilled'], tab: 5, prompt: 'Â§ñÂõΩ‰∫∫Êùê„ÅÆÂèóÂÖ•ÁµåÈ®ì„Å´„Å§„ÅÑ„Å¶Êïô„Åà„Å¶„Åè„Å†„Åï„ÅÑ\nÁµåÈ®ì„ÅÆÊúâÁÑ°„ÅØÊé°Áî®ÊôÇ„ÅÆÂèÇËÄÉÊÉÖÂ†±„Å®„Å™„Çä„Åæ„Åô„ÄÇ' },
            { id: 'actual_work_content', label: 'ÂÆüÈöõ„ÅÆÂÆüÁøíÂÜÖÂÆπ', sf: 'ActualWorkContent__c', type: 'text', req: false, bu: ['intern'], tab: 5, prompt: 'ÂÆüÈöõ„Å´„Å©„ÅÆ„Çà„ÅÜ„Å™ÂÆüÁøí„ÇíË°å„ÅÜ„Åã„ÇíÂÖ∑‰ΩìÁöÑ„Å´Ë®òËºâ„Åó„Å¶„Åè„Å†„Åï„ÅÑ\n„Çà„ÇäË©≥Á¥∞„Å™ÊÉÖÂ†±„Åå„ÄÅÈÅ©Âàá„Å™‰∫∫Êùê„Å®„ÅÆ„Éû„ÉÉ„ÉÅ„É≥„Ç∞„Å´„Å§„Å™„Åå„Çä„Åæ„Åô„ÄÇ' },
            { id: 'training_period', label: 'ÂÆüÁøíÊúüÈñì', sf: 'TrainingPeriod__c', type: 'select', req: false, opts: ['1Âπ¥', '2Âπ¥', '3Âπ¥', '5Âπ¥'], bu: ['intern'], tab: 5, prompt: 'ÂÆüÁøíÊúüÈñì„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ' },
            { id: 'high_altitude_work', label: 'È´òÊâÄ‰ΩúÊ•≠', sf: 'HighAltitudeWork__c', type: 'select', req: false, opts: ['Êúâ', 'ÁÑ°'], bu: ['intern', 'skilled'], tab: 5, prompt: 'È´òÊâÄ„Åß„ÅÆ‰ΩúÊ•≠„ÅåÂê´„Åæ„Çå„Åæ„Åô„ÅãÔºü\nÂÆâÂÖ®ÁÆ°ÁêÜ„ÅÆË¶≥ÁÇπ„Åã„ÇâÊ≠£Á¢∫„Å™ÊÉÖÂ†±„Çí„ÅäÈ°ò„ÅÑ„Åó„Åæ„Åô„ÄÇ' },
            { id: 'outdoor_indoor_ratio', label: 'Â±ãÂ§ñÂ±ãÂÜÖ‰ΩúÊ•≠ÊØîÁéá', sf: 'OutdoorIndoorRatio__c', type: 'text', req: false, bu: ['intern', 'skilled'], tab: 5, prompt: 'Â±ãÂ§ñ‰ΩúÊ•≠„Å®Â±ãÂÜÖ‰ΩúÊ•≠„ÅÆÊØîÁéá„ÇíÊïô„Åà„Å¶„Åè„Å†„Åï„ÅÑ\n‰æã:„ÄåÂ±ãÂ§ñ7Ââ≤„ÄÅÂ±ãÂÜÖ3Ââ≤„Äç„Äå„Åª„ÅºÂ±ãÂÜÖ„Äç„Å™„Å©' },
            { id: 'overtime_nightshift', label: 'ÊÆãÊ•≠„ÉªÂ§úÂã§„ÅÆÊúâÁÑ°', sf: 'OvertimeNightshift__c', type: 'select', req: false, opts: ['Êúâ', 'ÁÑ°'], bu: ['intern', 'skilled'], tab: 5, prompt: 'ÊÆãÊ•≠„ÇÑÂ§úÂã§„ÅÆÂèØËÉΩÊÄß„Å´„Å§„ÅÑ„Å¶Êïô„Åà„Å¶„Åè„Å†„Åï„ÅÑ' },
            { id: 'sending_org_notes', label: 'ÈÄÅÂá∫Ê©üÈñ¢„Å∏„ÅÆÂÖ±Êúâ‰∫ãÈ†Ö', sf: 'SendingOrgNotes__c', type: 'text', req: false, bu: ['intern'], tab: 5, prompt: 'ÈÄÅÂá∫Ê©üÈñ¢„Å´Áâπ„Å´‰ºù„Åà„Å¶„Åä„Åç„Åü„ÅÑ‰∫ãÈ†Ö„Åå„ÅÇ„Çå„Å∞Ë®òËºâ„Åó„Å¶„Åè„Å†„Åï„ÅÑ\nÊ•≠Âãô‰∏ä„ÅÆÁâπÊÄß„ÇÑÂøÖË¶Å„Å™„Çπ„Ç≠„É´„Å™„Å©' },
            { id: 'gender', label: 'ÊÄßÂà•', sf: 'Gender__c', type: 'select', req: false, opts: ['Áî∑ÊÄß', 'Â•≥ÊÄß', '‰∏çÂïè'], bu: ['intern', 'skilled'], tab: 5, prompt: 'ÊÄßÂà•„ÅÆÂ∏åÊúõ„Åå„ÅÇ„Çä„Åæ„Åô„ÅãÔºü\nÊ•≠ÂãôÂÜÖÂÆπ„Å´„Çà„ÇäÂøÖË¶Å„Å™Â†¥Âêà„ÅÆ„ÅøÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ' },
            { id: 'preferred_age', label: 'Â∏åÊúõÂπ¥ÈΩ¢', sf: 'PreferredAge__c', type: 'text', req: false, bu: ['intern', 'skilled'], tab: 5, prompt: 'Â∏åÊúõ„Åô„ÇãÂπ¥ÈΩ¢Â±§„ÇíÊïô„Åà„Å¶„Åè„Å†„Åï„ÅÑ\n‰æã:„Äå20‰ª£ÂâçÂçä„Äç„Äå25Ê≠≥ÔΩû35Ê≠≥„Äç„Å™„Å©' },
            { id: 'blood_type', label: 'Ë°ÄÊ∂≤Âûã', sf: 'BloodType__c', type: 'select', req: false, opts: ['A', 'B', 'O', 'AB', '‰∏çÂïè'], bu: ['intern', 'skilled'], tab: 5, prompt: 'Ë°ÄÊ∂≤Âûã„ÅÆÂ∏åÊúõ„Åå„ÅÇ„Çä„Åæ„Åô„ÅãÔºü\nÁâπ„Å´ÊåáÂÆö„Åå„Å™„ÅÑÂ†¥Âêà„ÅØ„Äå‰∏çÂïè„Äç„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ' },
            { id: 'preferred_height', label: 'Â∏åÊúõË∫´Èï∑', sf: 'PreferredHeight__c', type: 'text', req: false, bu: ['intern', 'skilled'], tab: 5, prompt: 'Â∏åÊúõ„Åô„ÇãË∫´Èï∑„Åå„ÅÇ„Çå„Å∞Ë®òËºâ„Åó„Å¶„Åè„Å†„Åï„ÅÑ\nÊ•≠Âãô‰∏äÂøÖË¶Å„Å™Â†¥Âêà„ÅÆ„Åø„ÄÇ‰æã:„Äå160cm‰ª•‰∏ä„Äç' },
            { id: 'preferred_weight', label: 'Â∏åÊúõ‰ΩìÈáç', sf: 'PreferredWeight__c', type: 'text', req: false, bu: ['intern', 'skilled'], tab: 5, prompt: 'Â∏åÊúõ„Åô„Çã‰ΩìÈáç„Åå„ÅÇ„Çå„Å∞Ë®òËºâ„Åó„Å¶„Åè„Å†„Åï„ÅÑ\nÊ•≠Âãô‰∏äÂøÖË¶Å„Å™Â†¥Âêà„ÅÆ„Åø„ÄÇ‰æã:„Äå60kg‰ª•‰∏ä„Äç' },
            { id: 'body_type', label: '‰ΩìÊ†º', sf: 'BodyType__c', type: 'select', req: false, opts: ['Â∞èÊüÑ', 'ÊôÆÈÄö', 'Â§ßÊüÑ', '‰∏çÂïè'], bu: ['intern', 'skilled'], tab: 5, prompt: 'Ê±Ç„ÇÅ„Çã‰ΩìÊ†º„Å´„Å§„ÅÑ„Å¶Êïô„Åà„Å¶„Åè„Å†„Åï„ÅÑ\nÊ•≠ÂãôÂÜÖÂÆπ„Å´„Çà„Çä‰ΩìÂäõ„ÅåÂøÖË¶Å„Å™Â†¥Âêà„ÅØÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ' },
            { id: 'fitness_video', label: '‰ΩìÂäõÊ∏¨ÂÆöÂãïÁîª', sf: 'FitnessVideo__c', type: 'select', req: false, opts: ['ÂøÖË¶Å', '‰∏çË¶Å'], bu: ['intern'], tab: 5, prompt: '‰ΩìÂäõÊ∏¨ÂÆöÂãïÁîª„ÅÆÊèêÂá∫„ÇíÊ±Ç„ÇÅ„Åæ„Åô„ÅãÔºü\n‰ΩìÂäõ„ÇíË¶Å„Åô„ÇãÊ•≠Âãô„ÅÆÂ†¥Âêà„ÅØ„ÄåÂøÖË¶Å„Äç„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ' },
            { id: 'dominant_hand', label: 'Âà©„ÅçÊâã', sf: 'DominantHand__c', type: 'select', req: false, opts: ['Âè≥', 'Â∑¶', '‰∏çÂïè'], bu: ['intern', 'skilled'], tab: 5, prompt: 'Âà©„ÅçÊâã„ÅÆÊåáÂÆö„ÅåÂøÖË¶Å„Åß„Åô„ÅãÔºü', help: 'Ê•≠Âãô„Åß‰ΩøÁî®„Åô„ÇãÈÅìÂÖ∑„Å®„ÅÆÈñ¢‰øÇ„Åß„ÄÅÂà©„ÅçÊâã„ÅåÊåáÂÆö„Åï„Çå„ÇãÂ†¥Âêà„Å´„ÅÆ„ÅøÈÅ∏Êäû' },
            { id: 'japanese_level', label: 'Êó•Êú¨Ë™ûËÉΩÂäõ', sf: 'JapaneseLevel__c', type: 'select', req: false, opts: ['N5', 'N4', 'N3', 'N2', 'N1', '‰∏çÂïè'], bu: ['intern', 'skilled'], tab: 5, prompt: 'ÂøÖË¶Å„Å™Êó•Êú¨Ë™ûËÉΩÂäõ„ÅÆ„É¨„Éô„É´„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ\nÊ•≠Âãô‰∏ä„ÅÆ„Ç≥„Éü„É•„Éã„Ç±„Éº„Ç∑„Éß„É≥„Å´ÂøÖË¶Å„Å™Ê∞¥Ê∫ñ„ÇíËÄÉÊÖÆ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ' },
            { id: 'glasses', label: '„É°„Ç¨„Éç', sf: 'Glasses__c', type: 'select', req: false, opts: ['ÂèØ', '‰∏çÂèØ', '‰∏çÂïè'], bu: ['intern', 'skilled'], tab: 5, prompt: 'ÁúºÈè°„ÅÆÁùÄÁî®„Å´„Å§„ÅÑ„Å¶Êïô„Åà„Å¶„Åè„Å†„Åï„ÅÑ', help: 'Ê•≠Âãô„ÅÆÂÆâÂÖ®‰∏ä„ÄÅÁúºÈè°„ÅÆÁùÄÁî®„ÅåÂïèÈ°å„Å®„Å™„ÇãÂ†¥Âêà„Å´„ÅÆ„ÅøÈÅ∏Êäû' },
            { id: 'tattoo', label: 'Âà∫Èùí', sf: 'Tattoo__c', type: 'select', req: false, opts: ['ÂèØ', '‰∏çÂèØ', '‰∏çÂïè'], bu: ['intern', 'skilled'], tab: 5, prompt: 'Âà∫Èùí(„Çø„Éà„Ç•„Éº)„Åå„ÅÇ„ÇãÊñπ„ÅÆÂèóÂÖ•„Å´„Å§„ÅÑ„Å¶Êïô„Åà„Å¶„Åè„Å†„Åï„ÅÑ', help: 'Ë®òËºâ‰æã:„ÄåÈï∑Ë¢ñ„ÅßÈö†„Åõ„ÇãÂ†¥Âêà„ÅØÂèØËÉΩ„Äç„ÄåÂ§ß„Åç„Åï„ÉªÂ†¥ÊâÄ„Å´Âïè„Çè„Åö‰∏çÂèØ„Äç' },
            { id: 'marital_status', label: 'ÁµêÂ©ö', sf: 'MaritalStatus__c', type: 'select', req: false, opts: ['Êó¢Â©öÂèØ', 'Êú™Â©ö„ÅÆ„Åø', '‰∏çÂïè'], bu: ['intern', 'skilled'], tab: 5, prompt: 'ÁµêÂ©ö„ÅÆÊúâÁÑ°„Å´„Å§„ÅÑ„Å¶Êù°‰ª∂„Åå„ÅÇ„Çä„Åæ„Åô„Åã?\nÁâπ„Å´ÊåáÂÆö„Åå„Å™„ÅÑÂ†¥Âêà„ÅØ„Äå‰∏çÂïè„Äç„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ' },
            { id: 'manners', label: 'Á§ºÂÑÄ„Éª„Éû„Éä„Éº', sf: 'Manners__c', type: 'select', req: false, opts: ['ÈáçË¶ñ', 'ÊôÆÈÄö', '‰∏çÂïè'], bu: ['intern', 'skilled'], tab: 5, prompt: 'Á§ºÂÑÄ„ÇÑ„Éû„Éä„Éº„Çí„Å©„ÅÆÁ®ãÂ∫¶ÈáçË¶ñ„Åó„Åæ„Åô„Åã?\nÈ°ßÂÆ¢ÂØæÂøú„ÇÑÊé•ÂÆ¢„ÅåÂê´„Åæ„Çå„ÇãÂ†¥Âêà„ÅØ„ÄåÈáçË¶ñ„Äç„Çí„ÅäÂãß„ÇÅ„Åó„Åæ„Åô„ÄÇ' },
            { id: 'smoking', label: 'Âñ´ÁÖô', sf: 'Smoking__c', type: 'select', req: false, opts: ['ÂèØ', '‰∏çÂèØ', '‰∏çÂïè'], bu: ['intern', 'skilled'], tab: 5, prompt: 'Âñ´ÁÖôËÄÖ„ÅÆÂèóÂÖ•„Å´„Å§„ÅÑ„Å¶Êïô„Åà„Å¶„Åè„Å†„Åï„ÅÑ', help: 'ÊâÄÂÆö„ÅÆ„É´„Éº„É´„ÇÑÂ†¥ÊâÄ„ÇíÂÆà„Çå„ÇãÂ†¥Âêà„ÅØ„Å©„ÅÜ„Åã„ÄÅ„Å™„Å©Á∑©Âíå„ÇíË°å„ÅÜ' },
            { id: 'drinking', label: 'È£≤ÈÖí', sf: 'Drinking__c', type: 'select', req: false, opts: ['ÂèØ', '‰∏çÂèØ', '‰∏çÂïè'], bu: ['intern', 'skilled'], tab: 5, prompt: 'È£≤ÈÖí„Å´„Å§„ÅÑ„Å¶Êïô„Åà„Å¶„Åè„Å†„Åï„ÅÑ', help: 'ÊâÄÂÆö„ÅÆ„É´„Éº„É´„ÇÑÂ†¥ÊâÄ„ÇíÂÆà„Çå„ÇãÂ†¥Âêà„ÅØ„Å©„ÅÜ„Åã„ÄÅ„Å™„Å©Á∑©Âíå„ÇíË°å„ÅÜ' },
            { id: 'work_experience', label: 'ÁèæÂ†¥ÁµåÈ®ì', sf: 'WorkExperience__c', type: 'select', req: false, opts: ['ÂøÖË¶Å', '‰∏çË¶Å', '‰∏çÂïè'], bu: ['intern', 'skilled'], tab: 5, prompt: 'ËÅ∑Á®Æ„Å´Èñ¢ÈÄ£„Åô„ÇãÁèæÂ†¥ÁµåÈ®ì„ÅØÂøÖË¶Å„Åß„Åô„Åã?\nÊú™ÁµåÈ®ìËÄÖ„Åß„ÇÇÂèØËÉΩ„Å™Â†¥Âêà„ÅØ„Äå‰∏çË¶Å„Äç„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ' },
            { id: 'hometown', label: 'Âá∫Ë∫´Âú∞', sf: 'Hometown__c', type: 'text', req: false, bu: ['intern', 'skilled'], tab: 5, prompt: 'Â∏åÊúõ„Åô„ÇãÂá∫Ë∫´Âú∞„Åå„ÅÇ„Çå„Å∞Ë®òËºâ„Åó„Å¶„Åè„Å†„Åï„ÅÑ\n‰æã:„Äå„Éô„Éà„Éä„É†ÂåóÈÉ®„Äç„Äå„Éï„Ç£„É™„Éî„É≥„Éª„Çª„ÉñÂú∞Âüü„Äç„Å™„Å©' },

            // „Åù„ÅÆ‰ªñÂ∏åÊúõ‰∫ãÈ†Ö - ÂÑ™ÂÖàÈ†Ü‰Ωç
            { id: 'priority_1', label: 'ÂÑ™ÂÖàÈ†Ü‰Ωç1', sf: 'Priority1__c', type: 'select', req: false, opts: ['Âπ¥ÈΩ¢„Éª‰ΩìÂäõ„ÉªË∫´‰ΩìÁöÑÁâπÂæ¥', 'Êó•Êú¨Ë™ûËÉΩÂäõ', 'Á§ºÂÑÄ„Éª„Éû„Éä„Éº„ÉªÊÄßÊ†º'], bu: ['intern', 'skilled'], tab: 5, prompt: '‰∫∫ÊùêÈÅ∏ÂÆö„Å´„Åä„ÅÑ„Å¶ÊúÄ„ÇÇÈáçË¶ñ„Åô„ÇãÈ†ÖÁõÆ„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ', help: 'ÊúÄ„ÇÇÈáçË¶ñ„Åô„ÇãÈ†ÖÁõÆ„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ' },
            { id: 'priority_2', label: 'ÂÑ™ÂÖàÈ†Ü‰Ωç2', sf: 'Priority2__c', type: 'select', req: false, opts: ['Âπ¥ÈΩ¢„Éª‰ΩìÂäõ„ÉªË∫´‰ΩìÁöÑÁâπÂæ¥', 'Êó•Êú¨Ë™ûËÉΩÂäõ', 'Á§ºÂÑÄ„Éª„Éû„Éä„Éº„ÉªÊÄßÊ†º'], bu: ['intern', 'skilled'], tab: 5, prompt: '2Áï™ÁõÆ„Å´ÈáçË¶ñ„Åô„ÇãÈ†ÖÁõÆ„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ', help: '2Áï™ÁõÆ„Å´ÈáçË¶ñ„Åô„ÇãÈ†ÖÁõÆ„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ' },
            { id: 'priority_3', label: 'ÂÑ™ÂÖàÈ†Ü‰Ωç3', sf: 'Priority3__c', type: 'select', req: false, opts: ['Âπ¥ÈΩ¢„Éª‰ΩìÂäõ„ÉªË∫´‰ΩìÁöÑÁâπÂæ¥', 'Êó•Êú¨Ë™ûËÉΩÂäõ', 'Á§ºÂÑÄ„Éª„Éû„Éä„Éº„ÉªÊÄßÊ†º'], bu: ['intern', 'skilled'], tab: 5, prompt: '3Áï™ÁõÆ„Å´ÈáçË¶ñ„Åô„ÇãÈ†ÖÁõÆ„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ', help: '3Áï™ÁõÆ„Å´ÈáçË¶ñ„Åô„ÇãÈ†ÖÁõÆ„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ' }
        ];

        const BUSINESS_UNITS = [
            { id: 'intern', name: 'ÊäÄËÉΩÂÆüÁøí', color: '#2563eb', description: 'ÂÆüÁøíÂÆüÊñΩËÄÖ„ÉªÈÄÅÂá∫Ê©üÈñ¢Âêë„Åë„ÅÆÈ†ÖÁõÆÊßãÊàê', icon: 'üè¢' },
            { id: 'skilled', name: 'ÁâπÂÆöÊäÄËÉΩ', color: '#0d9488', description: 'ÊîØÊè¥Ë®àÁîªÊõ∏„ÉªÈõáÁî®Â•ëÁ¥ÑÊõ∏Âêë„Åë„ÅÆÈ†ÖÁõÆÊßãÊàê', icon: '‚ö°' }
        ];

        const TABS = [
            { id: 1, name: 'Âü∫Êú¨ÊÉÖÂ†±', icon: 'üìã' },
            { id: 2, name: 'ÁîüÊ¥ªÁí∞Â¢É„ÉªÂÆøÊ≥äÊñΩË®≠', icon: 'üè†' },
            { id: 3, name: 'Âä¥ÂÉçÊôÇÈñì„Éª‰ºëÊÜ©„Éª‰ºëÊó•', icon: '‚è∞' },
            { id: 4, name: 'Ë≥ÉÈáë„ÉªÊâãÂΩì„ÉªÊîØÊâïÊù°‰ª∂', icon: 'üí∞' },
            { id: 5, name: 'ÂãüÈõÜË¶Å‰ª∂', icon: 'üë•' }
        ];

        const isHalfWidth = (str) => !str || /^[a-zA-Z0-9!-/:-@[-`{-~\s]+$/.test(str);
        const isNumeric = (str) => !str || /^[0-9]+$/.test(str);
        const escapeCSV = (str) => {
            if (str == null) return '';
            const s = String(str);
            if (s.includes(',') || s.includes('"') || s.includes('\n')) return `"${s.replace(/"/g, '""')}"`;
            return s;
        };

        const Notification = ({ message, type, onClose }) => {
            useEffect(() => {
                const t = setTimeout(onClose, 3000);
                return () => clearTimeout(t);
            }, [onClose]);
            const bg = type === 'error' ? '#ef4444' : type === 'warning' ? '#eab308' : '#10b981';
            return (
                <div className="notification" style={{ background: bg }}>
                    <span>{type === 'error' ? '‚ö†Ô∏è' : '‚úì'}</span>
                    <span style={{ flex: 1 }}>{message}</span>
                    <button onClick={onClose} style={{ color: 'white', fontSize: 18, padding: '2px 6px', borderRadius: 6 }}>‚úï</button>
                </div>
            );
        };

        const App = () => {
            const [appMode, setAppMode] = useState(null);
            const [dataList, setDataList] = useState([]);
            const [currentId, setCurrentId] = useState(null);
            const [currentTab, setCurrentTab] = useState(1);
            const [notification, setNotification] = useState(null);
            const fileInputRef = useRef(null);

            const currentData = useMemo(() => dataList.find(d => d.id === currentId) || null, [dataList, currentId]);

            const notify = (msg, type = 'success') => setNotification({ msg, type });

            const createNew = () => {
                const newId = `SF-${Math.random().toString(36).substr(2, 9).toUpperCase()}`;
                setDataList(prev => [...prev, { id: newId, bu: appMode, createdAt: new Date().toISOString() }]);
                setCurrentId(newId);
                setCurrentTab(1);
                notify('Êñ∞Ë¶è„É¨„Ç≥„Éº„Éâ„Çí‰ΩúÊàê„Åó„Åæ„Åó„Åü');
            };

            const updateField = (fieldId, value) => {
                setDataList(prev => prev.map(d => d.id === currentId ? { ...d, [fieldId]: value } : d));
            };

            const deleteRecord = (id) => {
                if (!confirm('„Åì„ÅÆ„É¨„Ç≥„Éº„Éâ„ÇíÂâäÈô§„Åó„Å¶„ÇÇ„Çà„Çç„Åó„ÅÑ„Åß„Åô„ÅãÔºü')) return;
                setDataList(prev => prev.filter(d => d.id !== id));
                if (currentId === id) setCurrentId(null);
                notify('„É¨„Ç≥„Éº„Éâ„ÇíÂâäÈô§„Åó„Åæ„Åó„Åü');
            };

            const validate = (data) => {
                const errors = [];
                if (!data) return errors;
                FIELDS.filter(f => f.bu?.includes(data.bu)).forEach(f => {
                    if (f.req && !data[f.id]) errors.push({ field: f.id, msg: `${f.label}„ÅØÂøÖÈ†àÈ†ÖÁõÆ„Åß„Åô„ÄÇ` });
                    if (data[f.id] && f.val === 'half' && !isHalfWidth(data[f.id]))
                        errors.push({ field: f.id, msg: `${f.label}„ÅØÂçäËßíËã±Êï∞Â≠ó„ÅÆ„Åø„Åß„Åô„ÄÇ` });
                    if (data[f.id] && f.val === 'num' && !isNumeric(data[f.id]))
                        errors.push({ field: f.id, msg: `${f.label}„ÅØÂçäËßíÊï∞Â≠ó„ÅÆ„Åø„Åß„Åô„ÄÇ` });
                });
                return errors;
            };

            const exportCSV = () => {
                try {
                    const fields = FIELDS.filter(f => f.bu?.includes(appMode));
                    const header = ['ID', ...fields.map(f => f.sf)].join(',');
                    const rows = dataList.filter(d => d.bu === appMode).map(d =>
                        [escapeCSV(d.id), ...fields.map(f => escapeCSV(d[f.id]))].join(',')
                    );
                    const csv = '\uFEFF' + [header, ...rows].join('\n');
                    const url = URL.createObjectURL(new Blob([csv], { type: 'text/csv;charset=utf-8;' }));
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `SF_Import_${appMode}_${new Date().toISOString().split('T')[0]}.csv`;
                    a.click();
                    URL.revokeObjectURL(url);
                    notify('CSV„ÇíÂá∫Âäõ„Åó„Åæ„Åó„Åü');
                } catch (e) {
                    notify('CSV„ÅÆÂá∫Âäõ„Å´Â§±Êïó„Åó„Åæ„Åó„Åü', 'error');
                }
            };

            if (!appMode) {
                return (
                    <div className="home-screen">
                        <div style={{ maxWidth: 800, width: '100%', textAlign: 'center' }}>
                            <h1 style={{ fontSize: 48, fontWeight: 900, color: 'white', marginBottom: 8, letterSpacing: '-0.05em', fontStyle: 'italic' }}>
                                CONTRACT MASTER
                            </h1>
                            <p style={{ color: '#64748b', marginBottom: 40, fontSize: 14 }}>ÈõáÁî®Â•ëÁ¥ÑÊõ∏‰ΩúÊàê„Ç∑„Çπ„ÉÜ„É†</p>
                            <div className="home-grid">
                                {BUSINESS_UNITS.map(bu => (
                                    <button key={bu.id} className="home-card" onClick={() => setAppMode(bu.id)}>
                                        <div className="icon-box" style={{ background: bu.color }}>{bu.icon}</div>
                                        <h2 style={{ fontSize: 22, fontWeight: 700, color: 'white', marginBottom: 8 }}>{bu.name}</h2>
                                        <p style={{ color: '#64748b', fontSize: 13, marginBottom: 32 }}>{bu.description}</p>
                                        <div style={{ color: '#818cf8', fontWeight: 700, fontSize: 11, letterSpacing: '0.1em', display: 'flex', alignItems: 'center', gap: 6 }}>
                                            START CREATION <span>‚Üí</span>
                                        </div>
                                    </button>
                                ))}
                            </div>
                        </div>
                    </div>
                );
            }

            const activeBU = BUSINESS_UNITS.find(b => b.id === appMode);
            const buRecords = dataList.filter(d => d.bu === appMode);
            const tabFields = FIELDS.filter(f => f.tab === currentTab && f.bu?.includes(appMode));
            const validationErrors = validate(currentData);
            const errorFieldIds = new Set(validationErrors.map(e => e.field));

            return (
                <div style={{ display: 'flex', height: '100vh', background: 'white' }}>
                    {notification && <Notification message={notification.msg} type={notification.type} onClose={() => setNotification(null)} />}

                    <div className="sidebar">
                        <div style={{ padding: 24 }}>
                            <button
                                onClick={() => setAppMode(null)}
                                style={{ fontSize: 11, fontWeight: 900, color: '#94a3b8', letterSpacing: '0.1em', textTransform: 'uppercase', display: 'flex', alignItems: 'center', gap: 4, marginBottom: 24 }}
                            >
                                ‚Üê Back
                            </button>
                            <div style={{ display: 'flex', alignItems: 'center', gap: 12, marginBottom: 24 }}>
                                <div className="icon-box-sm" style={{ background: activeBU.color, color: 'white' }}>üìÑ</div>
                                <h1 style={{ fontSize: 16, fontWeight: 900, letterSpacing: '-0.03em' }}>{activeBU.name}</h1>
                            </div>
                            <div className="grid-2">
                                <button
                                    onClick={createNew}
                                    style={{ background: '#4f46e5', color: 'white', fontWeight: 900, padding: '12px 8px', borderRadius: 12, fontSize: 11, display: 'flex', flexDirection: 'column', alignItems: 'center', gap: 4 }}
                                >
                                    <span style={{ fontSize: 20 }}>Ôºã</span> NEW
                                </button>
                                <button
                                    onClick={() => fileInputRef.current.click()}
                                    style={{ background: 'white', border: '1px solid #e2e8f0', color: '#475569', fontWeight: 900, padding: '12px 8px', borderRadius: 12, fontSize: 11, display: 'flex', flexDirection: 'column', alignItems: 'center', gap: 4 }}
                                >
                                    <span style={{ fontSize: 20 }}>‚Üë</span> LOAD
                                </button>
                                <input type="file" ref={fileInputRef} style={{ display: 'none' }} accept=".csv"
                                    onChange={(e) => { notify('„Åì„ÅÆÁí∞Â¢É„Åß„ÅØ„Éï„Ç°„Ç§„É´Ë™≠„ÅøËæº„Åø„ÇíÂà∂Èôê„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ', 'warning'); e.target.value = ''; }} />
                            </div>
                        </div>

                        <div style={{ flex: 1, overflowY: 'auto', padding: '0 16px 16px' }}>
                            <div style={{ fontSize: 10, fontWeight: 900, color: '#cbd5e1', letterSpacing: '0.1em', textTransform: 'uppercase', marginBottom: 8, paddingLeft: 8 }}>
                                Records ({buRecords.length})
                            </div>
                            {buRecords.map(item => {
                                const errors = validate(item);
                                return (
                                    <div key={item.id} className={`record-item ${currentId === item.id ? 'active' : ''}`}>
                                        <div onClick={() => setCurrentId(item.id)}>
                                            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: 2 }}>
                                                <span style={{ fontWeight: 700, fontSize: 12, overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap', paddingRight: 8 }}>
                                                    {item.company_name || '(Êú™ÂÖ•Âäõ)'}
                                                </span>
                                                <div className={`dot ${errors.length > 0 ? 'dot-red' : 'dot-green'}`} />
                                            </div>
                                            <div style={{ fontSize: 10, fontFamily: 'monospace', color: '#94a3b8' }}>{item.id}</div>
                                        </div>
                                        <button className="delete-btn" onClick={(e) => { e.stopPropagation(); deleteRecord(item.id); }}>
                                            üóëÔ∏è ÂâäÈô§
                                        </button>
                                    </div>
                                );
                            })}
                        </div>

                        <div style={{ padding: 20, background: 'white', borderTop: '1px solid #e2e8f0' }}>
                            <button className="btn-export" disabled={buRecords.length === 0} onClick={exportCSV}>
                                üíæ Export CSV
                            </button>
                        </div>
                    </div>

                    <div style={{ flex: 1, overflowY: 'auto', display: 'flex', flexDirection: 'column' }}>
                        {currentData ? (
                            <>
                                <div style={{ padding: '24px 32px', borderBottom: '1px solid #e2e8f0', position: 'sticky', top: 0, background: 'white', zIndex: 10, boxShadow: '0 1px 3px rgba(0,0,0,.08)' }}>
                                    <h2 style={{ fontSize: 28, fontWeight: 900, letterSpacing: '-0.04em', margin: '0 0 16px 0' }}>
                                        {currentData.company_name || 'New Item'}
                                    </h2>
                                    <div className="tab-nav">
                                        {TABS.map(tab => (
                                            <button
                                                key={tab.id}
                                                className={`tab-btn ${currentTab === tab.id ? 'active' : ''}`}
                                                onClick={() => setCurrentTab(tab.id)}
                                            >
                                                <span style={{ marginRight: 6 }}>{tab.icon}</span> {tab.name}
                                            </button>
                                        ))}
                                    </div>
                                </div>

                                <div style={{ padding: 48, maxWidth: 1200, margin: '0 auto', width: '100%' }}>
                                    <div className="grid-form">
                                        <div className="field-grid">
                                            <div className="field-section anim-fade">
                                                <div className="field-section-title">
                                                    {TABS.find(t => t.id === currentTab)?.icon} {TABS.find(t => t.id === currentTab)?.name}
                                                </div>
                                                {tabFields.map(f => (
                                                    <div key={f.id} style={{ marginBottom: 24 }}>
                                                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: 6 }}>
                                                            <label style={{ fontSize: 10, fontWeight: 900, textTransform: 'uppercase', letterSpacing: '0.1em', color: '#64748b' }}>
                                                                {f.label} {f.req && <span style={{ color: '#ef4444' }}>*</span>}
                                                            </label>
                                                            <span style={{ fontSize: 9, fontFamily: 'monospace', color: '#cbd5e1', fontStyle: 'italic' }}>{f.sf}</span>
                                                        </div>
                                                        {f.prompt && (
                                                            <div className="field-prompt">
                                                                {f.prompt}
                                                            </div>
                                                        )}
                                                        {f.type === 'select' ? (
                                                            <select
                                                                className={`field-input ${errorFieldIds.has(f.id) ? 'has-error' : ''}`}
                                                                value={currentData[f.id] || ''}
                                                                onChange={e => updateField(f.id, e.target.value)}
                                                            >
                                                                <option value="">Êú™ÈÅ∏Êäû</option>
                                                                {f.opts?.map(o => <option key={o} value={o}>{o}</option>)}
                                                            </select>
                                                        ) : (
                                                            <div className="relative">
                                                                <input
                                                                    className={`field-input ${errorFieldIds.has(f.id) ? 'has-error' : ''}`}
                                                                    type={f.type}
                                                                    value={currentData[f.id] || ''}
                                                                    onChange={e => updateField(f.id, e.target.value)}
                                                                    placeholder={f.note || ''}
                                                                />
                                                                {f.suf && <span className="suffix">{f.suf}</span>}
                                                            </div>
                                                        )}
                                                        {f.help && (
                                                            <div className="field-help">
                                                                üí° {f.help}
                                                            </div>
                                                        )}
                                                    </div>
                                                ))}
                                            </div>
                                        </div>

                                        <div>
                                            <div className="validation-panel">
                                                <div style={{ fontSize: 11, fontWeight: 900, textTransform: 'uppercase', letterSpacing: '0.15em', marginBottom: 20, display: 'flex', alignItems: 'center', gap: 8 }}>
                                                    <span style={{ color: '#818cf8' }}>‚öôÔ∏è</span> Validation
                                                </div>
                                                {validationErrors.length === 0 ? (
                                                    <div style={{ textAlign: 'center', padding: '24px 0', color: '#34d399' }}>
                                                        <div style={{ fontSize: 48, opacity: 0.6, marginBottom: 8 }}>‚úì</div>
                                                        <div style={{ fontWeight: 900, fontSize: 13, letterSpacing: '0.05em' }}>ALL CLEARED</div>
                                                    </div>
                                                ) : validationErrors.map((e, i) => (
                                                    <div key={i} className="error-item">
                                                        <span style={{ flexShrink: 0 }}>‚ö†Ô∏è</span>
                                                        <span>{e.msg}</span>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </>
                        ) : (
                            <div style={{ flex: 1, display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', color: '#e2e8f0' }}>
                                <div style={{ fontSize: 64, opacity: 0.15, marginBottom: 16 }}>üìã</div>
                                <p style={{ fontSize: 11, fontWeight: 900, letterSpacing: '0.15em', textTransform: 'uppercase' }}>Select an item to edit</p>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>

</html>
